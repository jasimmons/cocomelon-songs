<!DOCTYPE html>
<html lang="en">

<head>
  <title>Cocomelon Song Search</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
  <style>
    .footer {
      position: absolute;
      bottom: 0;
      width: 620px;
      height: 45px;
      background-color: #f5f5f5;
      margin-bottom: 150px;
    }
  </style>
</head>

<body style="padding-top:100px">
  <div class="container" style="width:650px">
    <form id="songsearch">
      <div class="form-group">
        <label for="season">Season:</label>
        <select name="season" id="season">
          <option value="1">1</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5</option>
        </select>
        <br/>
        <label for="episode">Episode:</label>
        <select name="episode" id="episode">
          <option value="1">1</option>
          <option value="2">2</option>
          <option value="3">3</option>
        </select>
        <br/>
        <button id="submit" type="button" class="btn btn-primary" style="margin-top:5px;">Submit</button>
      </div>
      <div style=" margin:auto" id="result">
      </div>
    </form>
  </div>

  <script type="text/javascript">
    var FUNCTION_API_URL = "%%FUNCTION_API_URL%%";
    var envAPI = '/songs/list'

    $("#submit").click(function () {
      search()
    })

    function search() {
      var season = $("#season").val().trim()
      var episode = $("#episode").val().trim()
      let API = FUNCTION_API_URL + envAPI
      let src = API + '?season=' + escape(season) + '&episode=' + escape(episode)
      console.log("sending", src)
      $.get(src, function (data, status) {
            console.log("status", status)
            $("#result").html('<p style="display:block; margin:auto;padding-top:10px">' + data + '</p>')
          })
    }
  </script>
</body>

</html>
